# Instructions for Copilot in The Task of drafting variable definition functions

1. The task is to draft functions that meet specific variable definition requirements. The list of variables and their definitions are provided in the `copilot-test-summary.Rmd` file. Each variable has a unique name, a definition, and space to include a summary of that variable derived from the data. The goal of this task is simply to create the variable functions, not to generate the summaries.
2. Each variable function should be named according to the variable name provided in the `copilot-test-summary.Rmd` file. Each function should start with `calc_` followed by `sys_` or `str_` depending on whether the variable is systemic or streamlined, respectively. The rest of the variable name will follow in snake case. Follow the example functions in `R/queried-vars.R` for guidance on naming conventions, structure, and formatting. Some notes
    - Pay close attention to the use of comments both to describe the function's overall purpose and parameters, as well as its internal logic.
    - Note as well the big block comments that separate variable functions from each other
    - Further, for each variable function defined, you should check for a similar variable function in `R/queried-vars.R` to ensure consistency in style and approach. For example, some variables are comparing against a Day 0 date, so if there is already a function that does that, you should follow the same approach.
    - You may find it helpful to also consider how those variables are being used in the `aim7-queried-summary.Rmd` file, as that may provide additional context for how the variable is intended to be calculated.
3. While each variable function should follow the example in `R/queried-vars.R`, each variable function should actually be separated into a different R script file within the `R/copilot-files/` directory. Each file should be named the same as the function defined within it. For example, the function `calc_sys_example_variable` should be saved in a file named `calc_sys_example_variable.R`. Each new file should be added `copilot-test-vars.R` as a source file to ensure it is included in the `.Rmd` file build.
4. Where possible, in the `copilot-test-summary.Rmd` file, there are hints about how to calculate each variable. For the most part, this is a list of possible variables to use as input parameters. In some cases, I have indicated the possible values of those variables, but in others you will need to use your best judgement.
5. In addition to defining the variable functions, I also want you to clean up the variable definitions in the `copilot-test-summary.Rmd` file. The current definitions were copy and pasted from a spreadsheet and don't always read well. Clean these up to follow the style and format of the variable definitions in `aim7-queried-summary.Rmd`. However, do not change the meaning of any of the definitions. Also, store this updated variable definition as a comment at the top of each variable function file you create in the `R/copilot-files/` directory, rather than modifing the `copilot-test-summary.Rmd` file itself.
6. We'll do this work in stages, so start by defining just three variable functions at a time. Once those are done, we can review them together before proceeding with the next set of three. For the very first three (not for every set of three thereafter), start by drafting just the files and commented blocks for me to review, before filling in the actual function code. This will allow me to provide feedback on your approach before you invest too much time in coding.
